# 客户与组织 - E2E 测试用例

## 说明
- 覆盖组织管理、客户管理与关系维护的核心业务流程
- 测试步骤为 UI 端到端流程，验证界面与接口联动

## 组织管理

E2E-ORG-001 创建组织
- 前置条件: 登录系统，拥有组织管理权限
- 步骤:
  1) 进入组织列表
  2) 点击新建组织
  3) 填写组织编码、名称、全称、状态、标签、是否有效、备注
  4) 保存
- 预期结果:
  - 列表出现新组织
  - 组织详情可查询

E2E-ORG-002 创建组织-编码重复
- 前置条件: 已存在相同组织编码
- 步骤:
  1) 新建组织，填写重复编码
  2) 保存
- 预期结果:
  - 系统提示编码重复
  - 组织未创建

E2E-ORG-003 编辑组织
- 前置条件: 存在可编辑组织
- 步骤:
  1) 进入组织详情
  2) 修改名称或备注
  3) 保存
- 预期结果:
  - 组织信息更新
  - 列表与详情同步

E2E-ORG-004 组织状态变更
- 前置条件: 存在组织
- 步骤:
  1) 进入组织详情
  2) 状态改为 INACTIVE
  3) 保存
- 预期结果:
  - 组织状态变更

E2E-ORG-005 组织标签包含 CUSTOMER 时同步客户
- 前置条件: 组织标签包含 CUSTOMER
- 步骤:
  1) 创建或编辑组织，添加 CUSTOMER 标签
  2) 保存
  3) 进入客户列表搜索组织编码
- 预期结果:
  - 客户记录存在或更新

E2E-ORG-006 组织联系人信息维护
- 前置条件: 组织详情页可编辑
- 步骤:
  1) 切换到联系人信息页签
  2) 填写联系人姓名、电话、邮箱、类型、备注
  3) 保存
- 预期结果:
  - 联系人信息保存并可回显

## 客户管理

E2E-CUST-001 创建客户
- 前置条件: 登录系统
- 步骤:
  1) 进入客户列表
  2) 点击新建客户
  3) 填写客户编码、名称、全称、行业、状态、是否有效
  4) 保存
- 预期结果:
  - 客户创建成功
  - 客户列表可查询

E2E-CUST-002 创建客户触发组织创建
- 前置条件: 新建客户
- 步骤:
  1) 创建客户
  2) 等待异步处理完成
  3) 进入组织列表查询客户编码
- 预期结果:
  - 对应组织被创建
  - 客户 orgId 已回写

E2E-CUST-003 编辑客户
- 前置条件: 存在客户
- 步骤:
  1) 进入客户详情
  2) 修改客户名称或行业
  3) 保存
- 预期结果:
  - 客户信息更新

E2E-CUST-004 客户查询与分页
- 前置条件: 存在多条客户
- 步骤:
  1) 使用关键字查询
  2) 切换分页
- 预期结果:
  - 查询结果正确
  - 分页数据正确

## 客户关系维护

E2E-REL-001 新增客户-品牌商关系
- 前置条件: 存在客户与品牌组织
- 步骤:
  1) 进入客户详情
  2) 切换到客户-品牌商页签
  3) 点击新增关系
  4) 选择品牌组织
  5) 保存
- 预期结果:
  - 关系列表新增一条记录

E2E-REL-002 新增客户-零售商关系
- 前置条件: 存在客户与零售商组织
- 步骤:
  1) 切换到客户-零售商页签
  2) 新增关系并选择零售商组织
- 预期结果:
  - 关系列表新增记录

E2E-REL-003 新增客户-供应商关系
- 前置条件: 存在客户与供应商组织
- 步骤:
  1) 切换到客户-供应商页签
  2) 新增关系并选择供应商组织
- 预期结果:
  - 关系列表新增记录

E2E-REL-004 删除客户关系
- 前置条件: 存在客户关系记录
- 步骤:
  1) 进入关系页签
  2) 点击删除
- 预期结果:
  - 关系记录删除

E2E-REL-005 关系新增时下拉过滤
- 前置条件: 存在不同标签组织
- 步骤:
  1) 切换不同关系页签
  2) 打开新增关系弹窗
- 预期结果:
  - 下拉仅显示符合该页签标签的组织
