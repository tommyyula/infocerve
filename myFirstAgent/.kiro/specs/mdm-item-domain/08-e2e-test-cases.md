# MDM Item 领域 - E2E 测试用例

## 概述

本文档定义了 Item 领域的端到端测试用例，覆盖核心业务流程。

---

## E2E-001: 商品创建完整流程

**关联需求**：需求 1
**关联故事**：Story 1
**优先级**：P0

**前置条件**：
- 用户已登录系统
- 用户具有商品创建权限

**测试步骤**：
1. 进入商品管理页面
2. 点击"创建商品"按钮
3. 填写基础信息：SKU=TEST-001, 描述=测试商品, 类型=物料
4. 填写条码信息：EAN码=1234567890123
5. 配置序列号：启用序列号=是, 收货收集序列号=是
6. 配置批次：启用批次号=是, 保质期=365天
7. 点击"保存"按钮

**预期结果**：
- 商品创建成功，跳转到商品列表页
- 列表中显示新创建的商品
- 商品状态为"草稿"

**测试数据**：
- SKU: TEST-001
- EAN码: 1234567890123
- 保质期: 365

---

## E2E-002: 商品属性配置流程

**关联需求**：需求 10
**关联故事**：Story 5
**优先级**：P0

**前置条件**：
- 商品 TEST-001 已创建
- 用户具有属性管理权限

**测试步骤**：
1. 进入商品详情页
2. 切换到"属性"标签页
3. 点击"添加属性"按钮
4. 填写属性信息：名称=颜色, 类型=SELECT, 选项=红色,蓝色,绿色, 值=红色
5. 点击"确定"保存
6. 再次添加属性：名称=重量, 类型=NUMBER, 单位=kg, 值=1.5
7. 点击"确定"保存

**预期结果**：
- 两个属性添加成功
- 属性列表显示"颜色"和"重量"
- 属性值正确显示

**测试数据**：
- 属性1: 颜色=红色
- 属性2: 重量=1.5kg


---

## E2E-003: 商品单位配置流程

**关联需求**：需求 11
**关联故事**：Story 6
**优先级**：P0

**前置条件**：
- 商品 TEST-001 已创建
- 用户具有单位管理权限

**测试步骤**：
1. 进入商品详情页
2. 切换到"单位"标签页
3. 点击"添加单位"按钮
4. 填写基本单位：名称=个, 换算数量=1, 基本单位=是
5. 点击"确定"保存
6. 再次添加单位：名称=箱, 换算数量=12, 基本单位=否
7. 填写尺寸信息：长=40, 宽=30, 高=20
8. 点击"确定"保存

**预期结果**：
- 两个单位添加成功
- "个"标记为基本单位
- "箱"显示换算数量为12

**测试数据**：
- 基本单位: 个
- 包装单位: 箱(12个)

---

## E2E-004: 条码识别流程

**关联需求**：需求 6
**关联故事**：Story 2
**优先级**：P0

**前置条件**：
- 商品 TEST-001 已创建并配置 EAN 码
- 用户具有商品查看权限

**测试步骤**：
1. 进入商品列表页
2. 在搜索框输入 EAN 码：1234567890123
3. 点击搜索或按回车

**预期结果**：
- 系统识别条码并返回商品 TEST-001
- 显示商品详细信息

**测试数据**：
- EAN码: 1234567890123

---

## E2E-005: 套装商品配置流程

**关联需求**：需求 12
**关联故事**：Story 7
**优先级**：P1

**前置条件**：
- 商品 TEST-001 和 TEST-002 已创建
- 套装商品 KIT-001 已创建并标记为套装
- 用户具有套装管理权限

**测试步骤**：
1. 进入套装商品 KIT-001 详情页
2. 切换到"套装"标签页
3. 点击"添加组件"按钮
4. 选择组件商品：TEST-001, 数量=2
5. 点击"确定"保存
6. 再次添加组件：TEST-002, 数量=1
7. 点击"确定"保存

**预期结果**：
- 两个组件添加成功
- 组件列表显示 TEST-001(2个) 和 TEST-002(1个)

**测试数据**：
- 套装: KIT-001
- 组件1: TEST-001 x 2
- 组件2: TEST-002 x 1


---

## E2E-006: 托盘配置流程

**关联需求**：需求 18
**关联故事**：Story 7
**优先级**：P1

**前置条件**：
- 商品 TEST-001 已创建
- 商品已配置单位（个、箱）
- 用户具有托盘配置权限

**测试步骤**：
1. 进入商品详情页
2. 切换到"托盘"标签页
3. 点击"添加配置"按钮
4. 填写配置信息：名称=标准配置, 单位=箱, TI=4, HI=5, 默认=是
5. 点击"确定"保存

**预期结果**：
- 托盘配置添加成功
- 配置标记为默认
- 单位=箱, TI=4, HI=5 正确显示

**测试数据**：
- 单位: 箱
- TI: 4
- HI: 5

---

## E2E-007: 商品启用/禁用流程

**关联需求**：需求 5
**关联故事**：Story 1
**优先级**：P0

**前置条件**：
- 商品 TEST-001 已创建，状态为草稿
- 用户具有商品状态管理权限

**测试步骤**：
1. 进入商品详情页
2. 点击"启用"按钮
3. 确认启用操作
4. 验证状态变为"启用"
5. 点击"禁用"按钮
6. 确认禁用操作

**预期结果**：
- 启用后状态变为"启用"
- 禁用后状态变为"禁用"
- 状态变更记录在操作日志中

**测试数据**：
- 商品: TEST-001

---

## E2E-008: 商品列表查询流程

**关联需求**：需求 3
**关联故事**：Story 11
**优先级**：P0

**前置条件**：
- 系统中存在多个商品
- 用户具有商品查看权限

**测试步骤**：
1. 进入商品列表页
2. 在搜索框输入 SKU 关键字：TEST
3. 点击搜索
4. 选择状态筛选：启用
5. 选择类型筛选：物料
6. 点击下一页

**预期结果**：
- 搜索结果只显示 SKU 包含"TEST"的商品
- 筛选后只显示启用状态的物料类型商品
- 分页功能正常

**测试数据**：
- 搜索关键字: TEST
- 状态: 启用
- 类型: 物料


---

## E2E-009: 商品删除流程

**关联需求**：需求 4
**关联故事**：Story 1
**优先级**：P1

**前置条件**：
- 商品 TEST-DELETE 已创建
- 商品无关联库存
- 用户具有商品删除权限

**测试步骤**：
1. 进入商品详情页
2. 点击"删除"按钮
3. 确认删除操作

**预期结果**：
- 商品删除成功
- 跳转到商品列表页
- 列表中不再显示该商品

**测试数据**：
- 商品: TEST-DELETE

---

## E2E-010: 商品删除失败流程（有关联库存）

**关联需求**：需求 4
**关联故事**：Story 1
**优先级**：P1

**前置条件**：
- 商品 TEST-WITH-INV 已创建
- 商品有关联库存
- 用户具有商品删除权限

**测试步骤**：
1. 进入商品详情页
2. 点击"删除"按钮
3. 确认删除操作

**预期结果**：
- 系统提示"商品有关联库存，无法删除"
- 商品未被删除

**测试数据**：
- 商品: TEST-WITH-INV