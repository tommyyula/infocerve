---
inclusion: manual
---

# FSD 文档编写规范

## 概述

FSD（Frontend Specification Document）是面向前端开发的规格说明文档，基于 story、requirements、demo 综合输出，按功能模块拆分，确保前端开发不遗漏任何细节。

---

## FSD 与其他文档的关系

```
输入文档（FSD 引用这些）：
  01-story.md           -> 用户故事（US-xxx）
  02-domain-analysis.md -> 业务规则（BR-xxx）
  03-requirements.md    -> 验收标准（AC-xxx）
  04-domain-model.md    -> 数据模型（聚合、实体、值对象）
  05-demo/              -> 界面原型
      |
      v
  06-fsd/               -> FSD 文档（综合以上，面向前端开发）
      |
      v
输出文档（FSD 被这些引用）：
  07-design.md          -> API 设计（FSD 中引用）
  08-e2e-test-cases.md  -> E2E 测试（基于 FSD 场景）
```

FSD 的定位：
- 输入：story + requirements + demo + domain-analysis + domain-model
- 输出：面向前端开发的可执行规格文档
- 特点：按模块拆分、字段级别详细、包含交互逻辑
- 原则：不重复定义，通过引用关联其他文档

引用规范：
- 用户故事引用格式：US-001（来自 01-story.md）
- 业务规则引用格式：BR-001（来自 02-domain-analysis.md）
- 验收标准引用格式：AC-001（来自 03-requirements.md）
- 数据模型引用格式：04-domain-model.md#{锚点}
- API 接口引用格式：07-design.md#{锚点}

---

## 文件结构

```
06-fsd/
  README.md                 # FSD 索引和总览
  {module-name-1}.md        # 模块 1 的 FSD
  {module-name-2}.md        # 模块 2 的 FSD
  ...
```

模块拆分原则：
1. 按 Demo 页面拆分 - 每个主要页面对应一个 FSD
2. 按功能域拆分 - 相关功能聚合在一起
3. 按用户故事拆分 - 每个故事或故事组对应一个 FSD

---

## README.md 模板

```markdown
# {功能名称} FSD 文档索引

## 概述

{功能的整体描述，1-2 段}

## 模块列表

1. [{模块1名称}](./{module-1}.md) - {简要描述}
2. [{模块2名称}](./{module-2}.md) - {简要描述}
3. [{模块3名称}](./{module-3}.md) - {简要描述}

## 关联文档

- 用户故事：[01-story.md](../01-story.md)
- 需求规格：[03-requirements.md](../03-requirements.md)
- 前端原型：[05-demo/index.html](../05-demo/index.html)
- 技术设计：[07-design.md](../07-design.md)

## 模块依赖关系

{描述模块之间的依赖关系，如有}

## 开发顺序建议

1. {模块1} - 基础模块，无依赖
2. {模块2} - 依赖模块1
3. {模块3} - 依赖模块1和模块2
```

---

## 模块 FSD 模板

```markdown
# {模块名称} FSD

## 1. 功能概述

### 1.1 功能目标

{描述这个模块要实现什么功能，解决什么问题}

### 1.2 关联用户故事

- US-001：{用户故事标题}
- US-002：{用户故事标题}

### 1.3 关联需求项

- REQ-001：{需求标题}
- REQ-002：{需求标题}

---

## 2. 用户场景

### 场景 1：{场景名称}

角色：{用户角色}
前置条件：{进入场景的前提}
操作流程：
1. 用户 {操作1}
2. 系统 {响应1}
3. 用户 {操作2}
4. 系统 {响应2}

预期结果：{场景完成后的状态}

### 场景 2：{场景名称}

...

---

## 3. 界面说明

### 3.1 页面布局

对应 Demo：05-demo/index.html#{页面锚点}

{描述页面的整体布局结构}

### 3.2 页面区域

区域 A：{区域名称}
- 位置：{页面位置描述}
- 功能：{区域功能}
- 包含元素：{元素列表}

区域 B：{区域名称}
- 位置：{页面位置描述}
- 功能：{区域功能}
- 包含元素：{元素列表}

---

## 4. 交互逻辑

### 4.1 页面加载

触发时机：页面首次加载
处理逻辑：
1. 调用 API：GET /api/xxx
2. 显示加载状态
3. 数据返回后渲染列表
4. 如果数据为空，显示空状态提示

### 4.2 {交互名称}

触发时机：{用户操作}
处理逻辑：
1. {步骤1}
2. {步骤2}
3. {步骤3}

### 4.3 {交互名称}

...

---

## 5. 数据字段

### 5.1 列表字段

字段名：{displayName}
- 字段标识：{fieldKey}
- 数据类型：{string/number/date/enum}
- 是否必填：{是/否}
- 默认值：{默认值，如有}
- 显示格式：{格式说明}
- 校验规则：{校验规则}
- 备注：{其他说明}

字段名：{displayName}
- 字段标识：{fieldKey}
- ...

### 5.2 表单字段

字段名：{displayName}
- 字段标识：{fieldKey}
- 控件类型：{input/select/datepicker/...}
- 数据类型：{string/number/date/enum}
- 是否必填：{是/否}
- 默认值：{默认值，如有}
- 占位符：{placeholder}
- 校验规则：{校验规则}
- 枚举值：{如果是枚举类型，列出所有选项}
- 联动规则：{与其他字段的联动关系}
- 备注：{其他说明}

### 5.3 枚举定义

枚举名：{enumName}
- {value1}：{显示文本1}
- {value2}：{显示文本2}
- {value3}：{显示文本3}

---

## 6. 业务规则

### 6.1 {规则类别}

BR-001：{规则描述}
- 触发条件：{何时触发}
- 处理逻辑：{如何处理}
- 影响范围：{影响哪些字段/功能}

BR-002：{规则描述}
- ...

### 6.2 {规则类别}

...

---

## 7. 异常处理

### 7.1 表单校验错误

错误场景：{场景描述}
错误提示：{提示文案}
处理方式：{如何处理}

### 7.2 API 错误

错误码：{errorCode}
错误场景：{场景描述}
错误提示：{提示文案}
处理方式：{如何处理}

### 7.3 网络异常

错误场景：网络请求超时/断网
错误提示：{提示文案}
处理方式：{如何处理}

---

## 8. 依赖说明

### 8.1 API 接口

接口 1：{接口名称}
- 路径：{HTTP Method} {URL}
- 用途：{接口用途}
- 详细设计：07-design.md#{锚点}

接口 2：{接口名称}
- ...

### 8.2 组件依赖

- {组件1}：{用途}
- {组件2}：{用途}

### 8.3 权限要求

- {权限1}：{权限说明}
- {权限2}：{权限说明}

---

## 9. 国际化（i18n）

### 9.1 静态文案

页面标题：
- key：{i18n.key}
- 中文：{中文文案}
- 英文：{英文文案}

按钮文案：
- key：{i18n.key}
- 中文：{中文文案}
- 英文：{英文文案}

提示信息：
- key：{i18n.key}
- 中文：{中文文案}
- 英文：{英文文案}

### 9.2 动态文案（含变量）

- key：{i18n.key}
- 中文：已选择 {count} 项
- 英文：{count} items selected
- 变量：count（数字）

### 9.3 日期/数字格式

日期格式：
- 中文：YYYY年MM月DD日 / YYYY-MM-DD
- 英文：MM/DD/YYYY / MMM DD, YYYY

数字格式：
- 中文：1,234.56
- 英文：1,234.56

货币格式：
- 中文：¥1,234.56
- 英文：$1,234.56

### 9.4 枚举值翻译

枚举名：{enumName}
- {value1}：中文={中文文本} / 英文={英文文本}
- {value2}：中文={中文文本} / 英文={英文文本}

---

## 10. 数据模型引用

[说明] 数据模型详细定义在领域建模文档中，此处仅列出本模块涉及的模型和关键属性。

### 10.1 涉及的聚合/实体

聚合根：{AggregateName}
- 详细定义：04-domain-model.md#{锚点}
- 本模块使用的属性：{属性列表}

实体：{EntityName}
- 详细定义：04-domain-model.md#{锚点}
- 本模块使用的属性：{属性列表}

### 10.2 涉及的值对象

值对象：{ValueObjectName}
- 详细定义：04-domain-model.md#{锚点}
- 用途：{在本模块中的用途}

---

## 11. API 接口引用

[说明] API 详细设计在技术设计文档中，此处列出本模块依赖的接口清单。

### 11.1 查询接口

接口：{接口名称}
- 路径：GET /api/xxx
- 详细设计：07-design.md#{锚点}
- 用途：{本模块中的用途}
- 调用时机：{何时调用}

### 11.2 命令接口

接口：{接口名称}
- 路径：POST /api/xxx
- 详细设计：07-design.md#{锚点}
- 用途：{本模块中的用途}
- 调用时机：{何时调用}
- 成功后处理：{成功后的 UI 行为}
- 失败后处理：{失败后的 UI 行为}

---

## 12. 验收标准引用

[说明] 验收标准详细定义在需求规格文档中，此处列出本模块对应的验收标准。

### 12.1 关联的验收标准

来源：03-requirements.md

AC-001：{验收标准描述}
- 对应交互：本文档 4.x 章节
- 验证方式：{如何验证}

AC-002：{验收标准描述}
- 对应交互：本文档 4.x 章节
- 验证方式：{如何验证}

### 12.2 前端特有验收标准

[说明] 以下为前端实现特有的验收标准，补充 requirements.md 中未覆盖的 UI/UX 细节。

AC-FE-001：{前端验收标准}
- 验证方式：{如何验证}

AC-FE-002：{前端验收标准}
- 验证方式：{如何验证}
```

---

## 编写要点

### 1. 字段定义要完整

每个字段必须包含：
- 字段标识（用于 API 对接）
- 数据类型
- 是否必填
- 校验规则
- 显示格式

### 2. 交互逻辑要具体

不要写：
- "点击按钮后提交表单"

要写：
- "点击保存按钮"
- "前端校验表单字段"
- "校验通过后调用 POST /api/xxx"
- "显示 loading 状态"
- "成功后显示提示'保存成功'，关闭弹窗，刷新列表"
- "失败后显示错误提示，保持弹窗打开"

### 3. 异常处理要全面

覆盖以下场景：
- 表单校验失败
- API 返回业务错误
- API 返回系统错误
- 网络超时/断网
- 权限不足

### 4. 与 Demo 对应

每个 FSD 模块必须：
- 明确对应 Demo 的哪个页面/区域
- 字段顺序与 Demo 一致
- 交互逻辑与 Demo 演示一致

### 5. 与 Requirements 对应

每个 FSD 模块必须：
- 列出关联的需求项（REQ-xxx）
- 确保所有需求项都被覆盖
- 业务规则引用 domain-analysis 中的 BR-xxx

---

## 自检清单

FSD 完成后，对照以下清单检查：

基础结构：
- [ ] README.md 包含所有模块索引
- [ ] 每个模块有独立的 FSD 文件
- [ ] 功能概述清晰，关联了用户故事和需求项

内容完整性：
- [ ] 用户场景覆盖主要操作流程
- [ ] 界面说明与 Demo 对应
- [ ] 交互逻辑具体可执行
- [ ] 数据字段定义完整（标识、类型、校验、格式）
- [ ] 业务规则引用正确（BR-xxx）
- [ ] 异常处理覆盖全面
- [ ] 国际化文案已列出（如需多语言）

文档引用：
- [ ] 数据模型引用 04-domain-model.md
- [ ] API 接口引用 07-design.md
- [ ] 验收标准引用 03-requirements.md
- [ ] 引用的锚点链接有效

验收标准：
- [ ] 所有 requirements.md 中的验收标准已关联
- [ ] 前端特有验收标准已补充
- [ ] 每条验收标准有明确的验证方式

---

最后更新：2026-01-15
