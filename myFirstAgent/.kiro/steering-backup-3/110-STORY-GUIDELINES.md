---
inclusion: manual
---

# 用户故事编写规范

## 文件位置

```
.kiro/specs/{feature-name}/story.md
```

---

## 模板结构

```markdown
# {功能名称} - 用户故事

## 背景
[描述功能的业务背景和价值]

## 用户故事列表

### Story 1: {故事标题}
**作为** {用户角色}
**我想要** {功能描述}
**以便于** {业务价值}

#### 验收标准
- [ ] 标准1
- [ ] 标准2
```

---

## 用户角色

仓库管理员 - 负责仓库整体管理：创建单据、审批、报表查看
收货员 - 负责入库收货：扫码收货、上架
拣货员 - 负责出库拣货：扫码拣货、确认出库
盘点员 - 负责库存盘点：盘点录入、差异处理
系统管理员 - 负责系统配置：用户管理、权限配置

---

## 功能描述要点

- 使用动词开头
- 描述具体、可操作的动作
- 使用统一语言中的术语

正确示例：创建入库单并添加入库明细
错误示例：管理入库（太模糊）

---

## 验收标准格式

推荐 Given-When-Then 格式：

```markdown
- [ ] GIVEN 入库单状态为"待收货" WHEN 录入收货数量 THEN 系统更新已收数量
- [ ] GIVEN 收货数量超过计划110% WHEN 提交收货 THEN 系统显示超量警告
```

---

## 验收标准与需求规格的关系

Story 验收标准（业务视角）：
- 格式：Given-When-Then
- 目的：描述业务场景和用户期望
- 受众：业务人员、产品经理、开发团队
- 抽象层次：高层次，关注业务价值
- 示例：GIVEN 入库单状态为"待收货" WHEN 录入收货数量 THEN 系统更新已收数量

Requirements 验收标准（系统视角）：
- 格式：EARS 模式（WHEN/IF/THEN THE System SHALL）
- 目的：定义可测试的系统行为
- 受众：开发团队、测试团队
- 抽象层次：系统层次，关注系统响应
- 示例：WHEN 用户提交收货数量 IF 数量有效 THEN THE Receipt_System SHALL 更新入库单已收数量并记录操作日志

两者关系：
- Story AC 是业务需求的表达
- Requirements AC 是 Story AC 的系统化、可测试化表达
- Story AC 关注"为什么"和"做什么"
- Requirements AC 关注"系统如何响应"
- Story AC 用于沟通业务价值
- Requirements AC 用于指导开发和测试

---

## INVEST 原则

Independent - 故事之间尽量独立
Negotiable - 可协商，不是合同
Valuable - 对用户有价值
Estimable - 可估算工作量
Small - 足够小，一个迭代可完成
Testable - 可测试验证

---

## 拆分方法

按用户角色 - 不同角色的操作分开
按操作类型 - CRUD 分开
按业务流程 - 流程步骤分开
按数据变化 - 简单到复杂
按界面 - 不同界面分开

---

## 检查清单

故事完整性：
- [ ] 有明确的用户角色
- [ ] 功能描述具体可操作
- [ ] 业务价值清晰
- [ ] 使用统一语言中的术语

验收标准质量：
- [ ] 每个故事至少3条验收标准
- [ ] 验收标准可测试、可验证
- [ ] 覆盖正常流程和异常情况
