---
inclusion: manual
---

# 领域分析编写规范（战略设计）

## 文件位置

```
.kiro/specs/{feature-name}/domain-analysis.md
```

---

## 模板结构

```markdown
# {功能名称} - 领域分析

## 1. 统一语言（Ubiquitous Language）
## 2. 领域识别
## 3. 限界上下文（Bounded Context）
## 4. 业务流程
## 5. 业务规则
```

---

## 1. 统一语言

统一语言是团队共同使用的业务术语，确保沟通无歧义。

格式要求：
- 术语：中文业务名称
- 定义：清晰的业务含义
- 英文：代码中使用的名称（PascalCase）

示例：
- 入库单 | 记录物料入库的单据 | InboundOrder
- 收货任务 | 分配给收货员执行的具体收货工作 | ReceivingTask

---

## 2. 领域识别

核心域（Core Domain）- 核心竞争力，自研精细设计
支撑域（Supporting Domain）- 支持核心域，自研标准设计
通用域（Generic Domain）- 使用成熟方案或外购

判断标准：
- 是否核心竞争力？
- 是否需要定制？
- 能否外购？

---

## 3. 限界上下文

上下文划分表格：
- 上下文名称
- 职责
- 核心概念
- 所属领域

上下文关系类型：
- Partnership（合作关系）- 两个上下文紧密合作
- U/D（客户-供应商）- 下游依赖上游
- ACL（防腐层）- 隔离外部系统
- OHS（开放主机服务）- 提供标准化 API

---

## 4. 业务流程

端到端业务流程 - 描述完整流程，包括多阶段、多角色、多系统协作

多端协作模型：
- PC/Web - 仓库管理员：创建单据、确认、分配任务
- 手持端/PDA - 操作员：查看任务、扫描、采集数据
- 系统 - 自动：生成任务、汇总数据、更新库存

任务驱动模型（如有任务执行场景）：
```
[单据确认] -> [生成任务] -> [分配任务] -> [执行任务] -> [完成任务] -> [汇总回写]
```

事件风暴格式：
```
[命令] -> [事件] -> [策略/后续动作]
```

---

## 5. 业务规则

编号规范：BR-{上下文缩写}-{序号}

示例：
- BR-IN-001 入库数量不能为负数
- BR-IN-002 入库数量不能超过计划数量的 110%
- BR-INV-001 库存数量不能为负数

---

## 检查清单

统一语言：
- [ ] 所有业务术语都有明确定义
- [ ] 英文命名符合 PascalCase 规范

领域识别：
- [ ] 明确区分核心域、支撑域、通用域
- [ ] 每个领域有明确的投入策略

限界上下文：
- [ ] 每个上下文职责清晰、边界明确
- [ ] 上下文之间的关系类型正确

业务流程：
- [ ] 端到端业务流程完整描述
- [ ] 多端协作模型清晰
- [ ] 命令、事件、策略对应清晰

业务规则：
- [ ] 所有业务规则有唯一编号
- [ ] 规则描述清晰、可测试
