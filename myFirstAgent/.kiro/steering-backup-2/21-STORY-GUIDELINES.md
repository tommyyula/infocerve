---
inclusion: manual
---

# 用户故事编写规范（Story Guidelines）

## 概述

本规范定义了用户故事（User Story）的编写标准。

---

## 文件位置

```
.kiro/specs/{feature-name}/story.md
```

---

## 模板结构

```markdown
# {功能名称} - 用户故事

## 背景
[描述功能的业务背景和价值]

## 用户故事列表

### Story 1: {故事标题}
**作为** {用户角色}
**我想要** {功能描述}
**以便于** {业务价值}

#### 验收标准
- [ ] 标准1
- [ ] 标准2
```

---

## 编写要点

### 1. 用户角色（As a...）

常见角色：
- 仓库管理员 - 负责仓库整体管理
- 收货员 - 负责入库收货
- 拣货员 - 负责出库拣货
- 盘点员 - 负责库存盘点
- 系统管理员 - 负责系统配置

### 2. 功能描述（I want to...）

- 使用动词开头
- 描述具体、可操作的动作
- 使用统一语言中的术语

正确示例：
- 创建入库单并添加入库明细
- 扫描物料条码录入收货数量

错误示例：
- 管理入库（太模糊）
- 处理数据（不具体）

### 3. 业务价值（So that...）

- 说明为什么需要这个功能
- 体现业务收益

正确示例：
- 记录计划入库的物料信息，便于后续收货核对
- 确保库存数据准确，支持后续追溯

错误示例：
- 完成工作（无意义）
- 系统需要（不是业务价值）

---

## 验收标准编写格式

### Given-When-Then 格式（推荐）

```markdown
- [ ] GIVEN 入库单状态为"待收货" WHEN 录入收货数量 THEN 系统更新已收数量
- [ ] GIVEN 收货数量超过计划110% WHEN 提交收货 THEN 系统显示超量警告
```

### 简洁格式

```markdown
- [ ] 可以选择供应商
- [ ] 可以添加多条入库明细
- [ ] 保存后生成唯一入库单号
```

---

## INVEST 原则

- Independent - 故事之间尽量独立
- Negotiable - 可协商，不是合同
- Valuable - 对用户有价值
- Estimable - 可估算工作量
- Small - 足够小，一个迭代可完成
- Testable - 可测试验证

---

## 拆分方法

- 按用户角色 - 不同角色的操作分开
- 按操作类型 - CRUD 分开
- 按业务流程 - 流程步骤分开
- 按数据变化 - 简单到复杂
- 按界面 - 不同界面分开

---

## 检查清单

故事完整性：
- [ ] 有明确的用户角色
- [ ] 功能描述具体可操作
- [ ] 业务价值清晰
- [ ] 使用统一语言中的术语

验收标准质量：
- [ ] 每个故事至少3条验收标准
- [ ] 验收标准可测试、可验证
- [ ] 覆盖正常流程
- [ ] 覆盖边界情况和异常情况

故事质量：
- [ ] 符合 INVEST 原则
- [ ] 故事大小适中（1-3天可完成）
- [ ] 故事之间依赖关系清晰

---

## 常见问题

Q: 一个功能应该拆成几个故事？
A: 按 INVEST 原则，每个故事应该在1-3天内可完成。

Q: 验收标准写多少条合适？
A: 通常3-8条。太少可能遗漏场景，太多说明故事太大需要拆分。

Q: 技术任务算用户故事吗？
A: 不算。技术任务应该单独管理，或作为故事的子任务。

---

## 下一步

完成 story.md 后，进入领域分析阶段，编写 domain-analysis.md。

---

最后更新：2026-01-03
